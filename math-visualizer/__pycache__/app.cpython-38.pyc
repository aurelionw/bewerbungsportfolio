U

    Ã¸â€œâ€ gâ€º#  Ã£                   @   sÃš   d dl mZmZmZmZ d dlZd dlZd dlZd dl	Z	d dl
mZ d dlm
Z
 eeÆ’ZeÂ dÂ¡ddâ€ Æ’Zdd	â€ Zejd
dgdÂd
dâ€ Æ’ZejddgdÂddâ€ Æ’Zddâ€ ZejddgdÂddâ€ Æ’ZedkrÃ–ejddÂ dS )Ã©    )ÃšFlaskÃšrequestÃšjsonifyÃšrender_templateN)ÃšKurvendiskussion)Ãš	RechenwegÃº/c                  C   s   d} t d| dÂS )Nz
x^3 - 3*x + 2zhtmlprobe.htmlÂ©Zexample_function)r   r	   Â© r
   Ãº?C:\Users\Aurelio\Documents\Prog\Kurvendiskussionsrechner\app.pyÃš	htmlprobe   s    r   c                 C   sN   t | tjÆ’rtÂ | Â¡S t | tÆ’r2ddâ€ | Â Â¡ D Æ’S t | tÆ’rJddâ€ | D Æ’S | S )Nc                 S   s   i | ]\}}|t |Æ’â€œqS r
   Â©Ãšconvert_to_json_compatible)Ãš.0ÃškeyÃšvaluer
   r
   r   Ãš
<dictcomp>   s      z.convert_to_json_compatible.<locals>.<dictcomp>c                 S   s   g | ]}t |Æ’â€˜qS r
   r
   )r   Ãšitemr
   r
   r   Ãš
<listcomp>   s     z.convert_to_json_compatible.<locals>.<listcomp>)Ãš
isinstanceÃšspZBasicÃšlatexÃšdictÃšitemsÃšlist)Ãšdatar
   r
   r   r      s    


r   z
/api/simplifyZPOST)Ãšmethodsc               	   C   sj   t Â Â¡ } | Â dÂ¡}z,tÂ |Â¡}tÂ |Â¡}tÂ |Â¡}td|iÆ’W S  tjt	fk
rd   td|iÆ’ Y S X d S )NÃšfunktionr   )
r   Ãšget_jsonÃšgetr   ÃšsympifyZsimplifyr   r   ZSympifyErrorÃš
ValueError)r   Ãšfunktion_strZexprZsimplified_exprZlatex_outputr
   r
   r   Ãšsimplify_expression   s    



r#   z/api/kurvendiskussionc               
   C   s8  t Â Â¡ } | Â dÂ¡}| Â ddÂ¡}| Â dÂ¡}ÂzÂº|Â ddÂ¡}tÂ dd|Â¡}|Â d	d
Â¡}tÂ d|Â¡}||krv|rr|d nd}tÂ |Â¡}tÂ 	|Â¡}t
||Æ’}tÂ |Â¡}||d
Å“}	tÆ’ }
d|krÃ°t
|Â Â¡ Â dg Â¡Æ’|	d< t||Æ’}|Â Â¡ }|Â dg Â¡|	d< d|kÂrt
|Â Â¡ Â ddÂ¡Æ’|	d< d|kÂr`t
|Â Â¡ Â dg Â¡Æ’|	d< |
Â dÂ¡ t||Æ’}|Â Â¡ }|Â dg Â¡|	d< d|kÂrÂ®t
|Â Â¡ Â dg Â¡Æ’|	d< |
Â dÂ¡ t||Æ’}|Â Â¡ }|Â dg Â¡|	d< d|kÂrÃˆt
|Â Â¡ Æ’|	d< |
ÂrÃœ|Â |
Â¡|	d< t|	Æ’W S  tk
Âr2 }
 z.td|â€º d|
â€º ÂÆ’ td t|
Æ’d!Å“Æ’ W Y Â¢S d }
~
X Y nX d S )"Nr   ÃšvariableÃšxZselectedÃº^Ãº**z(\d+)([a-zA-Z])Ãº\1*\2Ãµ   Ã¢Ë†â€™Ãº-Ãº	[a-zA-Z]+r   )r   r$   ZNullstellenÃšschritteZNullstellen_rechenwegzy-AchsenabschnittzNicht definiertZ
ExtremstellenZ
extremstellenZersteZExtremstellen_rechenwegZWendepunkteZwendepunkteZzweiteZWendepunkte_rechenwegzVerhalten im unendlichenzVerhalten im UnendlichenZAbleitungenÃº Fehler in der Verarbeitung von 'Ãº': ÃšerrorÂ©ZstatusÃšmessage)r   r   r   ÃšreplaceÃšreÃšsubÃšfindallr   Ãšsymbolsr    r   r   Ãšsetr   Znullstellenr   Ãšwelche_rechnung_benutzenZberechne_y_achsenabschnittZberechne_extremstellenÃšaddZberechne_wendepunkteZverhalten_im_unendlichenZableitungen_anzeigenr   Ãš	ExceptionÃšprintÃšstr)r   r"   Ãšselected_variableZselected_optionsÃšdetected_variablesr$   r   ZkdZlatex_functionZresponseZableitungenÃšrechenweg_instanceÃš	rechenwegÃšer
   r
   r   Ãškurvendiskussion)   sd    








Ã¿
Ã¿


Ã¿



rB   c              	   C   sÃš   g }|Â  dtÂ | Â¡â€º dtÂ |Â¡â€º dÂÂ¡ |Â  dÂ¡ |D ]Å½}d|krtd|krt|Â  tÂ |d Â¡â€º dtÂ |d Â¡â€º dÂÂ¡ d	|krËœ|Â  d
tÂ |d	 Â¡â€º dÂÂ¡ d|kr6|Â  d
Â¡ |Â  tÂ |d Â¡â€º dÂÂ¡ q6|Â  dÂ¡ dÂ |Â¡S )z=
    Formatiert den Polynomdivision-Rechenweg als LaTeX.
    z\text{z
} : \left(z\right)z\begin{array}{r|l}ÃšdividendZquotientz & z \\Z
subtractedz-(z) \\Z	remainderz\hlinez\end{array}Ãš
)Ãšappendr   r   Ãšjoin)rC   ZdivisorZstepsr   Ãšstepr
   r
   r   Ãšformat_polynomdivision_as_latexz   s    $
*

rH   z/api/rechenwegc               
   C   sÃª  t Â Â¡ } | Â dÂ¡}| Â ddÂ¡}Âzv|Â ddÂ¡}tÂ dd|Â¡}|Â dd	Â¡Â d
dÂ¡}tttÂ d|Â¡Æ’Æ’}||kr||rx|d
 nd}t	Â 
|Â¡}t	Â |Â¡}t||Æ’}g }t
d|â€º ÂÆ’ t	Â |Â¡Â Â¡ dkrÃš|Â Â¡ }|Â |Â dg Â¡Â¡ qÂ¬t	Â |Â¡Â Â¡ dkÂr
|Â Â¡ }	|Â |	Â dg Â¡Â¡ nFt	Â |Â¡Â Â¡ dkÂrPt	Â ||Â¡}
|Â dt	Â |Â¡â€º dt	Â |
Â¡â€º ÂdÅ“Â¡ g }|D ]*}|Â |Â ddÂ¡â€º d|Â ddÂ¡â€º ÂÂ¡ ÂqXtddÂ |Â¡iÆ’W S  tk
ÂrÃ¤ }
 z.t
d|â€º d|
â€º ÂÆ’ tdt|
Æ’dÅ“Æ’ W Y Â¢S d }
~
X Y nX d S )Nr   r$   r%   r&   r'   z(\d)([a-zA-Z])r(   r)   r*   Ãº Ãš r+   r   zBereinigte Funktion: Ã©   r,   Ã©   Ã©   u!   Lineares AuflÃƒÂ¶sen der Gleichung:z = 0 \Rightarrow )Ãštextr   rN   z: r   r   z\\ 
r-   r.   r/   r0   )r   r   r   r2   r3   r4   r   r7   r5   r   r6   r    r   r;   ZPolyZdegreer8   ÃšextendZ	pq_formelZsolverE   r   r   rF   r:   r<   )r   r"   r=   r>   r$   r   r?   Zrechenweg_schritteZpolynomdivision_resultZ	pq_resultZloesungZlatex_stepsrG   rA   r
   r
   r   r@   Â   sJ    



Ã¾( Ã¿r@   Ãš__main__T)Ãšdebug)Zflaskr   r   r   r   Zsympyr   r3   Ãš
subprocessÃšosZ1Kurvendiskussionsrechner.modules.Kurvendiskussionr   Z*Kurvendiskussionsrechner.modules.Rechenwegr   Ãš__name__ZappZrouter   r   r#   rB   rH   r@   Ãšrunr
   r
   r
   r   Ãš<module>   s&   



P
Z
